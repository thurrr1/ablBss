{
    "openapi": "3.0.0",
    "info": {
        "title": "ABL BSS API Documentation",
        "description": "Dokumentasi API untuk Pengelolaan Berhenti Sementara Studi (BSS)",
        "contact": {
            "email": "abl.bss@example.com"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://127.0.0.1:8000",
            "description": "Server Lokal Development"
        }
    ],
    "paths": {
        "/login": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Masuk (Login) ke Aplikasi Laravel (Web Session)",
                "description": "Digunakan untuk mendapatkan sesi otentikasi (cookies) yang diperlukan untuk mengakses endpoint yang dilindungi oleh middleware 'web'.",
                "operationId": "loginUser",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "mahasiswa@example.com"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "password"
                                    },
                                    "remember": {
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "302": {
                        "description": "Berhasil login, dialihkan ke dashboard."
                    },
                    "422": {
                        "description": "Kredensial tidak valid."
                    }
                }
            }
        },
        "/api/pengajuan-cuti": {
            "post": {
                "tags": [
                    "Mahasiswa"
                ],
                "summary": "Mengajukan permohonan Cuti Akademik baru",
                "description": "Fungsional Layanan 1: Mengajukan permohonan Cuti Akademik baru (POST /api/pengajuan-cuti)",
                "operationId": "ajukanCuti",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "mahasiswa_id",
                                    "semester_cuti",
                                    "lama_cuti_semester",
                                    "alasan_cuti"
                                ],
                                "properties": {
                                    "mahasiswa_id": {
                                        "description": "ID Mahasiswa yang mengajukan",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "semester_cuti": {
                                        "description": "Semester cuti yang diajukan",
                                        "type": "string",
                                        "example": "Genap 2025/2026"
                                    },
                                    "lama_cuti_semester": {
                                        "description": "Lama cuti dalam semester",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "alasan_cuti": {
                                        "description": "Alasan detail pengajuan cuti",
                                        "type": "string",
                                        "example": "Mengambil magang di luar kota."
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Pengajuan cuti berhasil dibuat. Menunggu verifikasi PA."
                    },
                    "422": {
                        "description": "Validasi data gagal (misal: mahasiswa_id tidak valid)."
                    }
                }
            }
        },
        "/api/pengajuan-cuti/{id}": {
            "get": {
                "tags": [
                    "Mahasiswa"
                ],
                "summary": "Melihat detail status satu permohonan Cuti",
                "description": "Fungsional Layanan 2: Melihat detail status satu permohonan Cuti Akademik (GET /api/pengajuan-cuti/{id})",
                "operationId": "lihatDetailPengajuan",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID Pengajuan Cuti",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detail pengajuan cuti berhasil diambil."
                    },
                    "404": {
                        "description": "Detail pengajuan cuti tidak ditemukan."
                    }
                }
            }
        },
        "/api/pengajuan-cuti/riwayat/{mahasiswaId}": {
            "get": {
                "tags": [
                    "Mahasiswa"
                ],
                "summary": "Melihat seluruh riwayat pengajuan Cuti Mahasiswa yang bersangkutan",
                "description": "Fungsional Layanan 3: Melihat seluruh riwayat pengajuan Cuti Mahasiswa (GET /api/pengajuan-cuti/riwayat/{mahasiswaId})\nFUNGSI INI SUDAH DIPERBAIKI MENGGUNAKAN PARAMETER ROUTE",
                "operationId": "lihatRiwayatMahasiswa",
                "parameters": [
                    {
                        "name": "mahasiswaId",
                        "in": "path",
                        "description": "ID Mahasiswa (diambil dari URL)",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Riwayat pengajuan cuti berhasil diambil."
                    },
                    "404": {
                        "description": "Riwayat tidak ditemukan."
                    }
                }
            }
        },
        "/api/pengajuan-cuti/{id}/batal": {
            "put": {
                "tags": [
                    "Mahasiswa"
                ],
                "summary": "Membatalkan pengajuan cuti yang masih Pending PA",
                "description": "Fungsional Layanan 4: Membatalkan pengajuan Cuti Akademik (PUT /api/pengajuan-cuti/{id}/batal)",
                "operationId": "batalkanPengajuan",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID Pengajuan Cuti",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "mahasiswa_id"
                                ],
                                "properties": {
                                    "mahasiswa_id": {
                                        "description": "ID Mahasiswa yang melakukan pembatalan",
                                        "type": "integer",
                                        "example": 1
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Pengajuan cuti berhasil dibatalkan."
                    },
                    "400": {
                        "description": "Pengajuan tidak dapat dibatalkan karena statusnya sudah berubah."
                    },
                    "403": {
                        "description": "Forbidden: Anda tidak berhak membatalkan pengajuan ini."
                    }
                }
            }
        },
        "/api/aktif-kembali": {
            "post": {
                "tags": [
                    "Mahasiswa"
                ],
                "summary": "Mengajukan permohonan untuk Aktif Kembali setelah masa cuti",
                "description": "Fungsional Layanan 5: Mengajukan permohonan untuk Aktif Kembali (POST /api/aktif-kembali)",
                "operationId": "ajukanAktifKembali",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "pengajuan_id",
                                    "semester_aktif"
                                ],
                                "properties": {
                                    "pengajuan_id": {
                                        "description": "ID Pengajuan cuti yang terkait",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "semester_aktif": {
                                        "description": "Semester yang diajukan untuk aktif kembali",
                                        "type": "string",
                                        "example": "Gasal 2026/2027"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Permintaan aktif kembali berhasil diajukan. Menunggu verifikasi BAAK."
                    },
                    "400": {
                        "description": "Pengajuan cuti belum disetujui atau sudah kadaluarsa."
                    }
                }
            }
        },
        "/api/admin/semua-pengajuan": {
            "get": {
                "tags": [
                    "Admin Global"
                ],
                "summary": "Melihat seluruh riwayat pengajuan cuti semua Mahasiswa (Akses Admin)",
                "description": "Fungsional Layanan Global: Melihat seluruh riwayat pengajuan cuti (Semua Mahasiswa)\nEndpoint: GET /api/admin/semua-pengajuan",
                "operationId": "lihatRiwayatGlobal",
                "responses": {
                    "200": {
                        "description": "Seluruh riwayat pengajuan cuti berhasil diambil."
                    },
                    "404": {
                        "description": "Belum ada data pengajuan cuti di database."
                    }
                }
            }
        },
        "/api/pa/pengajuan/pending": {
            "get": {
                "tags": [
                    "Dosen PA"
                ],
                "summary": "Mendapatkan daftar pengajuan cuti status Pending PA",
                "description": "Mengambil semua data pengajuan cuti mahasiswa bimbingan yang menunggu verifikasi.",
                "operationId": "listPendingPA",
                "parameters": [
                    {
                        "name": "PA-ID",
                        "in": "header",
                        "description": "ID Dosen PA yang sedang login (Simulasi)",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Daftar pengajuan berhasil diambil.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Daftar pengajuan cuti menunggu verifikasi PA berhasil diambil."
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/pa/pengajuan/{id}/setujui": {
            "put": {
                "tags": [
                    "Dosen PA"
                ],
                "summary": "Menyetujui permohonan cuti (Approve)",
                "description": "Fungsional Layanan 7: Menyetujui permohonan Cuti Mahasiswa\n* @OA\\Put(\npath=\"/api/pa/pengajuan/{id}/setujui\",\noperationId=\"setujuiPA\",\ntags={\"Dosen PA\"},\nsummary=\"Menyetujui permohonan cuti (Approve)\",",
                "operationId": "setujuiPA",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID Pengajuan Cuti",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "PA-ID",
                        "in": "header",
                        "description": "ID Dosen PA yang melakukan persetujuan",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Permohonan berhasil disetujui.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Permohonan cuti disetujui oleh PA."
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Gagal: Status pengajuan bukan Pending PA."
                    }
                }
            }
        },
        "/api/pa/pengajuan/{id}/tolak": {
            "put": {
                "tags": [
                    "Dosen PA"
                ],
                "summary": "Menolak permohonan cuti (Reject)",
                "description": "Fungsional Layanan 8: Menolak permohonan Cuti\n* @OA\\Put(\npath=\"/api/pa/pengajuan/{id}/tolak\",\noperationId=\"tolakPA\",\ntags={\"Dosen PA\"},\nsummary=\"Menolak permohonan cuti (Reject)\",",
                "operationId": "tolakPA",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID Pengajuan Cuti",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "PA-ID",
                        "in": "header",
                        "description": "ID Dosen PA yang menolak",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "catatan"
                                ],
                                "properties": {
                                    "catatan": {
                                        "description": "Alasan penolakan",
                                        "type": "string",
                                        "example": "Dokumen kurang lengkap, mohon lengkapi surat dokter."
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Permohonan berhasil ditolak.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Permohonan cuti ditolak oleh PA."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validasi gagal (Catatan wajib diisi)."
                    }
                }
            }
        },
        "/api/report/statistik-cuti": {
            "get": {
                "tags": [
                    "Admin Global"
                ],
                "summary": "Melihat statistik jumlah pengajuan cuti berdasarkan status",
                "description": "Fungsional Layanan 14: Mendapatkan data statistik Cuti\n* @OA\\Get(\npath=\"/api/report/statistik-cuti\",\noperationId=\"statistikCuti\",\ntags={\"Admin Global\"},\nsummary=\"Melihat statistik jumlah pengajuan cuti berdasarkan status\",",
                "operationId": "statistikCuti",
                "responses": {
                    "200": {
                        "description": "Statistik berhasil diambil.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Statistik pengajuan cuti berhasil diambil."
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "status_permohonan": {
                                                        "type": "string",
                                                        "example": "Pending PA"
                                                    },
                                                    "total": {
                                                        "type": "integer",
                                                        "example": 5
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/perpanjang-cuti/{id}": {
            "put": {
                "tags": [
                    "Admin Global"
                ],
                "summary": "Memperpanjang durasi cuti (Admin)",
                "description": "Fungsional Layanan 15: Memproses perpanjangan masa cuti\n* @OA\\Put(\npath=\"/api/admin/perpanjang-cuti/{id}\",\noperationId=\"perpanjangCuti\",\ntags={\"Admin Global\"},\nsummary=\"Memperpanjang durasi cuti (Admin)\",",
                "operationId": "perpanjangCuti",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID Pengajuan Cuti",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "tambah_semester"
                                ],
                                "properties": {
                                    "tambah_semester": {
                                        "description": "Jumlah semester yang ditambahkan",
                                        "type": "integer",
                                        "example": 1
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Masa cuti berhasil diperpanjang.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Masa cuti berhasil diperpanjang."
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Gagal: Status pengajuan belum Diterbitkan SK."
                    }
                }
            }
        }
    },
    "components": {
        "securitySchemes": {
            "web": {
                "type": "apiKey",
                "description": "Gunakan otentikasi session berbasis cookie (Login ke aplikasi utama Laravel terlebih dahulu).",
                "name": "XSRF-TOKEN",
                "in": "cookie"
            }
        }
    },
    "tags": [
        {
            "name": "Mahasiswa",
            "description": "Fungsional Layanan untuk Pengajuan Cuti Mahasiswa"
        },
        {
            "name": "Admin Global",
            "description": "Fungsional Layanan untuk Laporan Global Admin"
        },
        {
            "name": "Authentication",
            "description": "Authentication"
        },
        {
            "name": "Dosen PA",
            "description": "Dosen PA"
        }
    ]
}